---
title: "Covid 19 Analysis 🦠"
author: "Your name goes here"
date: "2020-10-17"
output:
  html_document:
    theme: flatly
    highlight: zenburn
    number_sections: yes
    toc: yes
    toc_float: yes
    code_folding: show
---



<div id="cdc-covid-19-public-use-data" class="section level1">
<h1>CDC COVID-19 Public Use Data</h1>
<pre class="r"><code># file contains 11 variables and 3.66m rows and is well over 380Mb. 
# It will take time to download

# URL link to CDC to download data
url &lt;- &quot;https://data.cdc.gov/api/views/vbim-akqf/rows.csv?accessType=DOWNLOAD&quot;

covid_data &lt;- vroom::vroom(url)%&gt;% # If vroom::vroom(url) doesn&#39;t work, use read_csv(url)
  clean_names()</code></pre>
<p>Given the data we have, I will produce two graphs that show death % rate:</p>
<ol style="list-style-type: decimal">
<li>by age group, sex, and whether the patient had co-morbidities or not</li>
<li>by age group, sex, and whether the patient was admited to Intensive Care Unit (ICU) or not.</li>
</ol>
<pre class="r"><code>skim (covid_data)</code></pre>
<table>
<caption><span id="tab:unnamed-chunk-2">Table 1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">covid_data</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">4481062</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">11</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">8</td>
</tr>
<tr class="odd">
<td align="left">Date</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">current_status</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">13</td>
<td align="right">25</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">sex</td>
<td align="right">12</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">age_group</td>
<td align="right">93</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">13</td>
<td align="right">0</td>
<td align="right">10</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">race_and_ethnicity_combined</td>
<td align="right">12</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">52</td>
<td align="right">0</td>
<td align="right">8</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">hosp_yn</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">icu_yn</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">death_yn</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">medcond_yn</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: Date</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">max</th>
<th align="left">median</th>
<th align="right">n_unique</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">cdc_report_dt</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="left">2020-01-01</td>
<td align="left">2020-09-15</td>
<td align="left">2020-07-04</td>
<td align="right">255</td>
</tr>
<tr class="even">
<td align="left">pos_spec_dt</td>
<td align="right">2957494</td>
<td align="right">0.34</td>
<td align="left">2020-01-01</td>
<td align="left">2020-09-28</td>
<td align="left">2020-05-30</td>
<td align="right">236</td>
</tr>
<tr class="odd">
<td align="left">onset_dt</td>
<td align="right">2113224</td>
<td align="right">0.53</td>
<td align="left">2020-01-01</td>
<td align="left">2020-09-29</td>
<td align="left">2020-06-24</td>
<td align="right">273</td>
</tr>
</tbody>
</table>
<p>By Age group, sex, and morbidity</p>
<pre class="r"><code>covid_data_clean_1 &lt;- covid_data %&gt;% 
filter(death_yn!=&quot;Missing&quot;) %&gt;% 
  filter(death_yn!=&quot;Unknown&quot;) %&gt;% 
  filter(age_group!=&quot;Unknown&quot;) %&gt;% 
  filter(sex!=&quot;Unknown&quot;) %&gt;%
  filter(sex!=&quot;Missing&quot;) %&gt;% 
  filter(medcond_yn!=&quot;Missing&quot;) %&gt;%
  filter(medcond_yn!=&quot;Unknown&quot;) %&gt;%
  filter(sex!=&quot;Other&quot;)</code></pre>
<pre class="r"><code>covid_morb&lt;- covid_data_clean_1 %&gt;% 
  group_by(age_group,death_yn,sex,medcond_yn) %&gt;%
  summarise(count=n()) %&gt;% 
  pivot_wider(names_from = death_yn, values_from = count) %&gt;% 
  mutate(death_rate=(Yes/(Yes+No))) %&gt;% 
  mutate(death_rate_perc=paste(round(100*death_rate, 1), &quot;%&quot;, sep=&quot;&quot;))

covid_morb</code></pre>
<pre><code>## # A tibble: 36 x 7
## # Groups:   age_group, sex [18]
##    age_group     sex    medcond_yn    No   Yes death_rate death_rate_perc
##    &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;      &lt;int&gt; &lt;int&gt;      &lt;dbl&gt; &lt;chr&gt;          
##  1 0 - 9 Years   Female No          6623     3   0.000453 0%             
##  2 0 - 9 Years   Female Yes         2434     6   0.00246  0.2%           
##  3 0 - 9 Years   Male   No          6768     5   0.000738 0.1%           
##  4 0 - 9 Years   Male   Yes         2758     6   0.00217  0.2%           
##  5 10 - 19 Years Female No         20576     4   0.000194 0%             
##  6 10 - 19 Years Female Yes         8328    13   0.00156  0.2%           
##  7 10 - 19 Years Male   No         18226     4   0.000219 0%             
##  8 10 - 19 Years Male   Yes         7465    16   0.00214  0.2%           
##  9 20 - 29 Years Female No         41891     7   0.000167 0%             
## 10 20 - 29 Years Female Yes        22301    79   0.00353  0.4%           
## # … with 26 more rows</code></pre>
<pre class="r"><code>covid_morb$medcond_yn_f = factor(covid_morb$medcond_yn, levels=c(&#39;Yes&#39;,&#39;No&#39;))

morb.labs &lt;- c(&quot;Without comorbidities&quot;, &quot;With comorbidities&quot;)
names(morb.labs) &lt;- c(medcond_yn_f=&quot;No&quot;, medcond_yn_f=&quot;Yes&quot;)

ggplot(covid_morb, aes(x=death_rate,y=age_group))+
  geom_col(alpha=0.8,fill=&quot;#6C7EA2&quot;)+
  facet_grid(medcond_yn_f~sex, 
               ,labeller=labeller(medcond_yn_f=morb.labs))+
  labs(title=&quot;Covid death rate by age group, sex and presence of co-morbidities&quot;,x=&quot;&quot;,y=&quot;&quot;)+
  scale_x_continuous(labels=scales::percent)+
  geom_text(aes(label=death_rate_perc),nudge_x = 0.07, size=3)+
  coord_fixed(ratio = 0.04)+
   theme(strip.background = element_rect(
     color=&quot;black&quot;, fill=&quot;grey&quot;, linetype=&quot;solid&quot;), panel.background = element_rect(fill = &quot;white&quot;),panel.grid=element_line(size=0.5, colour=&quot;#F1F1EB&quot;), panel.border = element_rect(fill=NA))</code></pre>
<p><img src="/projects/project1_files/figure-html/unnamed-chunk-4-1.png" width="648" style="display: block; margin: auto;" />
By age group, sex and admissions to ICU</p>
<pre class="r"><code>covid_data_clean_2 &lt;- covid_data %&gt;% 
  filter(death_yn!=&quot;Missing&quot;) %&gt;% 
  filter(death_yn!=&quot;Unknown&quot;) %&gt;% 
  filter(age_group!=&quot;Unknown&quot;) %&gt;% 
  filter(sex!=&quot;Unknown&quot;) %&gt;%
  filter(sex!=&quot;Missing&quot;) %&gt;% 
  filter(icu_yn!=&quot;Missing&quot;) %&gt;%
  filter(icu_yn!=&quot;Unknown&quot;) %&gt;%
  filter(medcond_yn!=&quot;Missing&quot;) %&gt;%
  filter(medcond_yn!=&quot;Unknown&quot;) %&gt;%
  filter(sex!=&quot;Other&quot;)
         
covid_icu&lt;- covid_data_clean_2 %&gt;% 
  group_by(age_group,death_yn,sex,icu_yn) %&gt;%
  summarise(count=n()) %&gt;% 
  pivot_wider(names_from = death_yn, values_from = count) %&gt;% 
  mutate(death_rate=(Yes/(Yes+No))) %&gt;% 
  mutate(death_rate_perc=paste(round(100*death_rate, 1), &quot;%&quot;, sep=&quot;&quot;))

covid_icu</code></pre>
<pre><code>## # A tibble: 36 x 7
## # Groups:   age_group, sex [18]
##    age_group     sex    icu_yn    No   Yes death_rate death_rate_perc
##    &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;  &lt;int&gt; &lt;int&gt;      &lt;dbl&gt; &lt;chr&gt;          
##  1 0 - 9 Years   Female No      3467     5   0.00144  0.1%           
##  2 0 - 9 Years   Female Yes       49     2   0.0392   3.9%           
##  3 0 - 9 Years   Male   No      3595    NA  NA        NA%            
##  4 0 - 9 Years   Male   Yes       61     7   0.103    10.3%          
##  5 10 - 19 Years Female No     12395     4   0.000323 0%             
##  6 10 - 19 Years Female Yes       70     8   0.103    10.3%          
##  7 10 - 19 Years Male   No     10991     3   0.000273 0%             
##  8 10 - 19 Years Male   Yes       95    13   0.120    12%            
##  9 20 - 29 Years Female No     29087    15   0.000515 0.1%           
## 10 20 - 29 Years Female Yes      204    34   0.143    14.3%          
## # … with 26 more rows</code></pre>
<pre class="r"><code>covid_icu$icu_yn_f = factor(covid_icu$icu_yn, levels=c(&#39;Yes&#39;,&#39;No&#39;))

icu.labs &lt;- c(&quot;Not Admitted to ICU&quot;, &quot;Admitted to ICU&quot;)
names(icu.labs) &lt;- c(icu_yn_f=&quot;No&quot;, icu_yn_f=&quot;Yes&quot;)

ggplot(covid_icu, aes(x=death_rate,y=age_group))+
  geom_col(alpha=0.8,fill=&quot;#FF5B33&quot;)+
  facet_grid(icu_yn_f~sex, 
               , labeller=labeller(icu_yn_f=icu.labs))+
  labs(title=&quot;Covid death rate by gender, age and ICU admittance&quot;,x=&quot;&quot;,y=&quot;&quot;)+
  scale_x_continuous(labels=scales::percent)+
  geom_text(aes(label=death_rate_perc),nudge_x = 0.07, size=3)+
  coord_fixed(ratio = 0.04)+
  theme(strip.background = element_rect(
     color=&quot;black&quot;, fill=&quot;grey&quot;, linetype=&quot;solid&quot;), panel.background = element_rect(fill = &quot;white&quot;),panel.grid=element_line(size=0.5, colour=&quot;#F1F1EB&quot;), panel.border = element_rect(fill=NA))</code></pre>
<p><img src="/projects/project1_files/figure-html/unnamed-chunk-5-1.png" width="648" style="display: block; margin: auto;" /></p>
</div>
<div id="covid-cases-in-other-countries" class="section level1">
<h1>Covid cases in other countries</h1>
<p>Given that this data was collected by the CDC it only provides information on the covid epidemic in the US. As an european I would like to have a closer look at Covid in Europe.</p>
<pre class="r"><code>#download the data
covid_more&lt;- read_csv(&quot;~/desktop/Hanna-website/data/coviddata.csv&quot;)

#have a look at the data
skim(covid_more)</code></pre>
<table>
<caption><span id="tab:unnamed-chunk-6">Table 2: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">covid_more</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">50725</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">41</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">Date</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">logical</td>
<td align="left">9</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">28</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">iso_code</td>
<td align="right">292</td>
<td align="right">0.99</td>
<td align="right">3</td>
<td align="right">8</td>
<td align="right">0</td>
<td align="right">212</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">continent</td>
<td align="right">584</td>
<td align="right">0.99</td>
<td align="right">4</td>
<td align="right">13</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">location</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">4</td>
<td align="right">32</td>
<td align="right">0</td>
<td align="right">213</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: Date</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">max</th>
<th align="left">median</th>
<th align="right">n_unique</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">date</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">2019-12-31</td>
<td align="left">2020-10-17</td>
<td align="left">2020-06-19</td>
<td align="right">292</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: logical</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="left">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">new_tests</td>
<td align="right">50725</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
<tr class="even">
<td align="left">total_tests</td>
<td align="right">50725</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
<tr class="odd">
<td align="left">total_tests_per_thousand</td>
<td align="right">50725</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
<tr class="even">
<td align="left">new_tests_per_thousand</td>
<td align="right">50725</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
<tr class="odd">
<td align="left">new_tests_smoothed</td>
<td align="right">50725</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
<tr class="even">
<td align="left">new_tests_smoothed_per_thousand</td>
<td align="right">50725</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
<tr class="odd">
<td align="left">tests_per_case</td>
<td align="right">50725</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
<tr class="even">
<td align="left">positive_rate</td>
<td align="right">50725</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
<tr class="odd">
<td align="left">tests_units</td>
<td align="right">50725</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;">
<colgroup>
<col width="25%" />
<col width="8%" />
<col width="11%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="4%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">total_cases</td>
<td align="right">3648</td>
<td align="right">0.93</td>
<td align="right">1.29e+05</td>
<td align="right">1.30e+06</td>
<td align="right">1.00</td>
<td align="right">1.41e+02</td>
<td align="right">1.62e+03</td>
<td align="right">1.63e+04</td>
<td align="right">3.94e+07</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">new_cases</td>
<td align="right">864</td>
<td align="right">0.98</td>
<td align="right">1.58e+03</td>
<td align="right">1.43e+04</td>
<td align="right">-8261.00</td>
<td align="right">0.00e+00</td>
<td align="right">1.20e+01</td>
<td align="right">1.87e+02</td>
<td align="right">3.96e+05</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">new_cases_smoothed</td>
<td align="right">1648</td>
<td align="right">0.97</td>
<td align="right">1.56e+03</td>
<td align="right">1.40e+04</td>
<td align="right">-552.00</td>
<td align="right">7.10e-01</td>
<td align="right">1.67e+01</td>
<td align="right">1.93e+02</td>
<td align="right">3.48e+05</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">total_deaths</td>
<td align="right">12318</td>
<td align="right">0.76</td>
<td align="right">5.97e+03</td>
<td align="right">4.83e+04</td>
<td align="right">1.00</td>
<td align="right">1.10e+01</td>
<td align="right">6.90e+01</td>
<td align="right">5.97e+02</td>
<td align="right">1.11e+06</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">new_deaths</td>
<td align="right">864</td>
<td align="right">0.98</td>
<td align="right">4.43e+01</td>
<td align="right">3.71e+02</td>
<td align="right">-1918.00</td>
<td align="right">0.00e+00</td>
<td align="right">0.00e+00</td>
<td align="right">3.00e+00</td>
<td align="right">1.05e+04</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">new_deaths_smoothed</td>
<td align="right">1648</td>
<td align="right">0.97</td>
<td align="right">4.44e+01</td>
<td align="right">3.60e+02</td>
<td align="right">-232.14</td>
<td align="right">0.00e+00</td>
<td align="right">2.90e-01</td>
<td align="right">3.43e+00</td>
<td align="right">7.46e+03</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">total_cases_per_million</td>
<td align="right">3904</td>
<td align="right">0.92</td>
<td align="right">2.39e+03</td>
<td align="right">4.75e+03</td>
<td align="right">0.00</td>
<td align="right">6.87e+01</td>
<td align="right">4.51e+02</td>
<td align="right">2.62e+03</td>
<td align="right">4.54e+04</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">new_cases_per_million</td>
<td align="right">928</td>
<td align="right">0.98</td>
<td align="right">2.84e+01</td>
<td align="right">1.02e+02</td>
<td align="right">-2212.54</td>
<td align="right">0.00e+00</td>
<td align="right">1.78e+00</td>
<td align="right">2.05e+01</td>
<td align="right">8.65e+03</td>
<td align="left">▁▇▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">new_cases_smoothed_per_million</td>
<td align="right">1713</td>
<td align="right">0.97</td>
<td align="right">2.75e+01</td>
<td align="right">6.65e+01</td>
<td align="right">-269.98</td>
<td align="right">1.80e-01</td>
<td align="right">3.33e+00</td>
<td align="right">2.30e+01</td>
<td align="right">2.47e+03</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">total_deaths_per_million</td>
<td align="right">12559</td>
<td align="right">0.75</td>
<td align="right">8.32e+01</td>
<td align="right">1.67e+02</td>
<td align="right">0.00</td>
<td align="right">3.29e+00</td>
<td align="right">1.68e+01</td>
<td align="right">6.84e+01</td>
<td align="right">1.24e+03</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">new_deaths_per_million</td>
<td align="right">928</td>
<td align="right">0.98</td>
<td align="right">5.80e-01</td>
<td align="right">2.95e+00</td>
<td align="right">-67.90</td>
<td align="right">0.00e+00</td>
<td align="right">0.00e+00</td>
<td align="right">2.30e-01</td>
<td align="right">2.15e+02</td>
<td align="left">▁▇▁▁▁</td>
</tr>
<tr class="even">
<td align="left">new_deaths_smoothed_per_million</td>
<td align="right">1713</td>
<td align="right">0.97</td>
<td align="right">5.80e-01</td>
<td align="right">1.87e+00</td>
<td align="right">-9.68</td>
<td align="right">0.00e+00</td>
<td align="right">2.00e-02</td>
<td align="right">3.30e-01</td>
<td align="right">6.31e+01</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">stringency_index</td>
<td align="right">8718</td>
<td align="right">0.83</td>
<td align="right">5.71e+01</td>
<td align="right">2.69e+01</td>
<td align="right">0.00</td>
<td align="right">3.89e+01</td>
<td align="right">6.20e+01</td>
<td align="right">7.87e+01</td>
<td align="right">1.00e+02</td>
<td align="left">▃▃▆▇▆</td>
</tr>
<tr class="even">
<td align="left">population</td>
<td align="right">292</td>
<td align="right">0.99</td>
<td align="right">8.73e+07</td>
<td align="right">6.08e+08</td>
<td align="right">809.00</td>
<td align="right">1.40e+06</td>
<td align="right">8.28e+06</td>
<td align="right">2.98e+07</td>
<td align="right">7.79e+09</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">population_density</td>
<td align="right">2619</td>
<td align="right">0.95</td>
<td align="right">3.61e+02</td>
<td align="right">1.65e+03</td>
<td align="right">0.14</td>
<td align="right">3.77e+01</td>
<td align="right">8.81e+01</td>
<td align="right">2.14e+02</td>
<td align="right">1.93e+04</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">median_age</td>
<td align="right">5533</td>
<td align="right">0.89</td>
<td align="right">3.13e+01</td>
<td align="right">9.03e+00</td>
<td align="right">15.10</td>
<td align="right">2.33e+01</td>
<td align="right">3.11e+01</td>
<td align="right">3.97e+01</td>
<td align="right">4.82e+01</td>
<td align="left">▇▅▇▆▆</td>
</tr>
<tr class="odd">
<td align="left">aged_65_older</td>
<td align="right">6209</td>
<td align="right">0.88</td>
<td align="right">9.23e+00</td>
<td align="right">6.31e+00</td>
<td align="right">1.14</td>
<td align="right">3.55e+00</td>
<td align="right">6.98e+00</td>
<td align="right">1.48e+01</td>
<td align="right">2.71e+01</td>
<td align="left">▇▃▂▃▁</td>
</tr>
<tr class="even">
<td align="left">aged_70_older</td>
<td align="right">5768</td>
<td align="right">0.89</td>
<td align="right">5.83e+00</td>
<td align="right">4.31e+00</td>
<td align="right">0.53</td>
<td align="right">2.08e+00</td>
<td align="right">4.39e+00</td>
<td align="right">9.47e+00</td>
<td align="right">1.85e+01</td>
<td align="left">▇▃▂▂▁</td>
</tr>
<tr class="odd">
<td align="left">gdp_per_capita</td>
<td align="right">6127</td>
<td align="right">0.88</td>
<td align="right">2.08e+04</td>
<td align="right">2.04e+04</td>
<td align="right">661.24</td>
<td align="right">5.34e+03</td>
<td align="right">1.40e+04</td>
<td align="right">3.14e+04</td>
<td align="right">1.17e+05</td>
<td align="left">▇▃▁▁▁</td>
</tr>
<tr class="even">
<td align="left">extreme_poverty</td>
<td align="right">20983</td>
<td align="right">0.59</td>
<td align="right">1.22e+01</td>
<td align="right">1.93e+01</td>
<td align="right">0.10</td>
<td align="right">5.00e-01</td>
<td align="right">2.00e+00</td>
<td align="right">1.81e+01</td>
<td align="right">7.76e+01</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">cardiovasc_death_rate</td>
<td align="right">5546</td>
<td align="right">0.89</td>
<td align="right">2.52e+02</td>
<td align="right">1.17e+02</td>
<td align="right">79.37</td>
<td align="right">1.56e+02</td>
<td align="right">2.38e+02</td>
<td align="right">3.19e+02</td>
<td align="right">7.24e+02</td>
<td align="left">▇▇▃▁▁</td>
</tr>
<tr class="even">
<td align="left">diabetes_prevalence</td>
<td align="right">3923</td>
<td align="right">0.92</td>
<td align="right">8.05e+00</td>
<td align="right">4.15e+00</td>
<td align="right">0.99</td>
<td align="right">5.31e+00</td>
<td align="right">7.11e+00</td>
<td align="right">1.04e+01</td>
<td align="right">2.34e+01</td>
<td align="left">▅▇▃▁▁</td>
</tr>
<tr class="odd">
<td align="left">female_smokers</td>
<td align="right">15417</td>
<td align="right">0.70</td>
<td align="right">1.08e+01</td>
<td align="right">1.05e+01</td>
<td align="right">0.10</td>
<td align="right">1.90e+00</td>
<td align="right">6.40e+00</td>
<td align="right">1.96e+01</td>
<td align="right">4.40e+01</td>
<td align="left">▇▂▂▁▁</td>
</tr>
<tr class="even">
<td align="left">male_smokers</td>
<td align="right">15868</td>
<td align="right">0.69</td>
<td align="right">3.26e+01</td>
<td align="right">1.34e+01</td>
<td align="right">7.70</td>
<td align="right">2.14e+01</td>
<td align="right">3.14e+01</td>
<td align="right">4.09e+01</td>
<td align="right">7.81e+01</td>
<td align="left">▆▇▆▂▁</td>
</tr>
<tr class="odd">
<td align="left">handwashing_facilities</td>
<td align="right">29484</td>
<td align="right">0.42</td>
<td align="right">5.23e+01</td>
<td align="right">3.16e+01</td>
<td align="right">1.19</td>
<td align="right">2.12e+01</td>
<td align="right">5.22e+01</td>
<td align="right">8.37e+01</td>
<td align="right">9.90e+01</td>
<td align="left">▆▃▅▅▇</td>
</tr>
<tr class="even">
<td align="left">hospital_beds_per_thousand</td>
<td align="right">9965</td>
<td align="right">0.80</td>
<td align="right">3.10e+00</td>
<td align="right">2.52e+00</td>
<td align="right">0.10</td>
<td align="right">1.30e+00</td>
<td align="right">2.50e+00</td>
<td align="right">4.20e+00</td>
<td align="right">1.38e+01</td>
<td align="left">▇▃▂▁▁</td>
</tr>
<tr class="odd">
<td align="left">life_expectancy</td>
<td align="right">934</td>
<td align="right">0.98</td>
<td align="right">7.40e+01</td>
<td align="right">7.38e+00</td>
<td align="right">53.28</td>
<td align="right">6.99e+01</td>
<td align="right">7.54e+01</td>
<td align="right">7.94e+01</td>
<td align="right">8.68e+01</td>
<td align="left">▁▃▅▇▅</td>
</tr>
<tr class="even">
<td align="left">human_development_index</td>
<td align="right">7123</td>
<td align="right">0.86</td>
<td align="right">7.20e-01</td>
<td align="right">1.50e-01</td>
<td align="right">0.35</td>
<td align="right">6.00e-01</td>
<td align="right">7.50e-01</td>
<td align="right">8.50e-01</td>
<td align="right">9.50e-01</td>
<td align="left">▂▅▅▇▇</td>
</tr>
</tbody>
</table>
<p>First let’s compare the number of total cases in a few European countries</p>
<pre class="r"><code>covid_europe &lt;- covid_more %&gt;%
  
#filter data for countries
  filter(location %in% c(&quot;United Kingdom&quot;, &quot;Germany&quot;,&quot;France&quot;,&quot;Sweden&quot;, &quot;Switzerland&quot;))

covid_europe</code></pre>
<pre><code>## # A tibble: 1,459 x 41
##    iso_code continent location date       total_cases new_cases new_cases_smoot…
##    &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;date&gt;           &lt;dbl&gt;     &lt;dbl&gt;            &lt;dbl&gt;
##  1 FRA      Europe    France   2019-12-31          NA         0               NA
##  2 FRA      Europe    France   2020-01-01          NA         0               NA
##  3 FRA      Europe    France   2020-01-02          NA         0               NA
##  4 FRA      Europe    France   2020-01-03          NA         0               NA
##  5 FRA      Europe    France   2020-01-04          NA         0               NA
##  6 FRA      Europe    France   2020-01-05          NA         0               NA
##  7 FRA      Europe    France   2020-01-06          NA         0                0
##  8 FRA      Europe    France   2020-01-07          NA         0                0
##  9 FRA      Europe    France   2020-01-08          NA         0                0
## 10 FRA      Europe    France   2020-01-09          NA         0                0
## # … with 1,449 more rows, and 34 more variables: total_deaths &lt;dbl&gt;,
## #   new_deaths &lt;dbl&gt;, new_deaths_smoothed &lt;dbl&gt;, total_cases_per_million &lt;dbl&gt;,
## #   new_cases_per_million &lt;dbl&gt;, new_cases_smoothed_per_million &lt;dbl&gt;,
## #   total_deaths_per_million &lt;dbl&gt;, new_deaths_per_million &lt;dbl&gt;,
## #   new_deaths_smoothed_per_million &lt;dbl&gt;, new_tests &lt;lgl&gt;, total_tests &lt;lgl&gt;,
## #   total_tests_per_thousand &lt;lgl&gt;, new_tests_per_thousand &lt;lgl&gt;,
## #   new_tests_smoothed &lt;lgl&gt;, new_tests_smoothed_per_thousand &lt;lgl&gt;,
## #   tests_per_case &lt;lgl&gt;, positive_rate &lt;lgl&gt;, tests_units &lt;lgl&gt;,
## #   stringency_index &lt;dbl&gt;, population &lt;dbl&gt;, population_density &lt;dbl&gt;,
## #   median_age &lt;dbl&gt;, aged_65_older &lt;dbl&gt;, aged_70_older &lt;dbl&gt;,
## #   gdp_per_capita &lt;dbl&gt;, extreme_poverty &lt;dbl&gt;, cardiovasc_death_rate &lt;dbl&gt;,
## #   diabetes_prevalence &lt;dbl&gt;, female_smokers &lt;dbl&gt;, male_smokers &lt;dbl&gt;,
## #   handwashing_facilities &lt;dbl&gt;, hospital_beds_per_thousand &lt;dbl&gt;,
## #   life_expectancy &lt;dbl&gt;, human_development_index &lt;dbl&gt;</code></pre>
<pre class="r"><code>ggplot(covid_europe, aes(x=date, y=total_cases, fill=location))+
  
#choose graph type
  geom_col()+
  
#facet by country
  facet_wrap(~location)+
  
#add labels
  labs(title = &quot;France and the United Kingdom have most covid cases
       &quot;, 
        x=&quot;
       Time&quot;, 
       y=&quot;Total Cases
       &quot;)+
  
#choose theme and remove legend
  theme_economist()+
  theme(legend.position = &quot;none&quot;)+
  NULL</code></pre>
<p><img src="/projects/project1_files/figure-html/unnamed-chunk-8-1.png" width="648" style="display: block; margin: auto;" />
Now that we know that the UK and France have the highest total number of covid cases. Let’s have a look at the measures these countries have put in place in response.</p>
<pre class="r"><code>ggplot(covid_europe, aes(x=date, y=stringency_index, color=location))+
  
#choose graph type
   geom_line()+

# add labels
  labs(title = &quot;France had the strictest covid measures
       &quot;, x=&quot;
       Time&quot;, 
       y=&quot;Stringency Index
       &quot;)+

# choose theme &amp; legend position &amp; title
  theme_economist()+
  theme(legend.position = &quot;right&quot;)+
  theme(legend.title = element_blank())+
  NULL</code></pre>
<p><img src="/projects/project1_files/figure-html/unnamed-chunk-9-1.png" width="648" style="display: block; margin: auto;" />
As you can see from the Graph the UK and France also have the strictest covid measures as measured by the stringency index.</p>
<p>Now let’s have a look at whether strict measures have an effect on daily new cases.</p>
<pre class="r"><code>ggplot(covid_europe, aes(x=date, y=new_cases, color=stringency_index))+
  
#choose graph type
  geom_point()+

# choose color scale
  scale_color_gradient(low=&quot;blue&quot;, high=&quot;red&quot;)+
  
# add labels
  labs(title = &quot;Strict measures lead to lower case numbers
       &quot;, x=&quot;
       Time&quot;, 
       y=&quot;New Cases
       &quot;)+
  
#change legend title
  guides(color=guide_legend(&quot;Stringency Index&quot;))+
  
#facet wrap by country
  facet_wrap(~location)+
  
#choose theme
  theme_economist()+
  
  NULL</code></pre>
<p><img src="/projects/project1_files/figure-html/unnamed-chunk-10-1.png" width="648" style="display: block; margin: auto;" />
Now onto what we really care about: is there any country in this world where you do not have to adhere to strict covid measures? Well I have created a map.</p>
<pre class="r"><code>#Transform data
covid_measures &lt;- covid_more %&gt;%

#select only relevant variables
  select(iso_code,location,date,stringency_index) %&gt;%

#rename some columns for join with 
  rename(
    region = location,
   Stringency = stringency_index
    ) %&gt;% 
#rename United States to USA for left join
  mutate(
    region = ifelse(region == &quot;United States&quot;, &quot;USA&quot;, region)
    ) %&gt;% 

#filter for a recent date (i choose this because there were only few stringency index values available for more recent data)
  filter(date==&quot;2020-10-01&quot;)</code></pre>
<pre class="r"><code>#create world map data frame
world_map &lt;- map_data(&quot;world&quot;)

#join data frames
covid_measures_map &lt;- left_join(covid_measures, world_map, by = &quot;region&quot;)</code></pre>
<pre class="r"><code>#plot 
ggplot(covid_measures_map, aes(map_id = region, fill = Stringency))+

#choose geom_map
  geom_map(map = covid_measures_map,  color = &quot;white&quot;)+

#adapt limits of x and y scale
  expand_limits(x = covid_measures_map$long, y = covid_measures_map$lat)+

#select scale fill
  scale_fill_viridis_c(option = &quot;C&quot;)+
  
#add labels
  labs(title= &quot;Most countries currently have intermediate measures in place&quot;,subtitle = &quot;Current stringency level of covid measures in the world&quot;, x=&quot;&quot;,y=&quot;&quot;)+
  coord_fixed(ratio = 1.7)+
  NULL</code></pre>
<p><img src="/projects/project1_files/figure-html/unnamed-chunk-13-1.png" width="648" style="display: block; margin: auto;" /></p>
</div>
